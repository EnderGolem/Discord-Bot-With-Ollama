# Discord Bot With Ollama 
Discord-бот использующий локальную модель ollama для генерации ответов на сообщения. Полностью настраиваемый под ваши нужды!

## Особенности
- Интеграция с любыми моделями Ollama
- Контекстная память диалога
- Гибкая система конфигурации
- Защита от таймаутов (20 сек)

## Требования
- [.NET 6.0 SDK](https://dotnet.microsoft.com/download)
- [Ollama](https://ollama.com)
- Discord-бот с токеном


## ⚙️ Установка
```bash
# 1. Клонировать репозиторий
git clone https://github.com/yourrepo/discord-ollama-bot.git

# 2. Перейти в директорию проекта
cd discord-ollama-bot

# 3. Собрать проект
dotnet build
```

# Настройка
## 1. Установите модель Ollama
```bash
ollama pull llama3:70b  # Пример для Llama3-70B
```
## 2. Получите Discord токен:
- Создайте приложение на Discord Developer Portal
- Перейдите в раздел "Bot" → "Add Bot"
- Скопируйте токен (понадобится для конфига)

## 3. Настройте конфигурацию:

### Вариант 1: Создание нового конфига
1. Скопируйте шаблон конфига:
```bash
copy Examples/appsettings.json appsettings.json
```
2. Отредактируйте скопируемый конфиг
```json
{
  "Discord": {
    "Token": "Вставьте сюда токен дискорд бота"
  },
  "Ollama": {
    "Name": "Вставьте сюда Имя модели, как она будет представляться",
    "SystemPromt": "Вставьте сюда системный промт для модели",
    "Prompt": "Вставьте сюда промт модели, нужен только для генерационной модели. Место куда будет вставляться история сообщений оформить #InnerPrompt. Обязателен только для Generate",
    "LastMessageFormatting": "Вставьте сюда оформление последнего сообщения. Место куда будет вставляться последнее сообщение оформить #lastMessage.  Обязателен только для Generate",
    "MessageMemorisedCount": "Вставьте сюда количество сообщений которое будет помнить модель",
    "ModelType": "Вставьте сюда тип модели Generate или Chat",
    "ModelVersion": "Вставьте сюда версию модели Оллама к которой будет обращаться",
    "OllamaURL": "Вставьте URL к которому будет обращаться модель Ollamа"
  }
}
```
### Вариант 2: Скопировать готовый конфиг
1. Выберите подходящий конфиг из папки Examples/
2. Скопируйте его в корень проекта
3. Подставьте ваш Discord-Token





# Использование
```bash
dotnet run
```
## Доступные команды
| Команда           | Описание                          |
|:------------------|:----------------------------------|
| `/ping`           | Проверка работоспособности бота  |
| `/alwaysRespond`  | Переключение режима ответов       |

Бот будет отвечать:
- На все сообщения (по умолчанию)
- Только при упоминании (после использования /alwaysRespond)

## Ограничения
- Однопоточная обработка запросов
- Таймаут генерации: 20 секунд
- Рекомендуемый размер контекста: 15 сообщений

